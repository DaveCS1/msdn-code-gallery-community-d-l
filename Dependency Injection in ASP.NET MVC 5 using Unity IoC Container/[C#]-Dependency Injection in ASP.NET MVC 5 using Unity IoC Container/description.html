<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="https://uhf.microsoft.com/mscc/statics/mscc-0.3.7.min.css" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Header,0:HeaderFooterSprite,0:Header.NonMtps;/Areas/Centers/Themes/StandardDevCenter/Content:0&amp;amp;v=4E557785E2BDDED1CD5C2C3B6458143A" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Footer,0:HeaderFooterSprite,0:Footer.NonMtps,1:NewFooterSock,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;v=BB208CA7577BB26F9BF04A6EC76C08A9" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Dependency Injection in ASP.NET MVC 5 using Unity IoC Container.</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" />
        <link href="https://i1.code.msdn.s-msft.com/content/common/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="https://i1.code.msdn.s-msft.com/content/common/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>Dependency Injection in ASP.NET MVC 5 using Unity IoC Container.</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            C#, Unity, MVC5
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            Unity, Dependency Injection, Unity IoC Container
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Web
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">en-US</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Updated</label>
                    <div id="LastUpdated">1/19/2018</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">MIT</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<h1></h1>
<p>Introduction</p>
<p><span>A Visual Studio 2015 project which shows how to use the Dependancy Injection in an ASP.NET&nbsp;MVC 5 web application project, using the Unity IOC container.</span></p>
<p><span>Some Basics on Dependacy Injection and IOC</span></p>
<p>The Dependency Injection pattern is a particular implementation of Inversion of Control.&nbsp;<span>Inversion of Control (IoC)</span>&nbsp;means that objects do not create other objects on which they rely to do their work. Instead, they get the objects that
 they need from an outside source (for example, an xml configuration file).</p>
<p><span>Dependency Injection (DI)</span>&nbsp;means that this is done without the object intervention, usually by a framework component that passes constructor parameters and set properties.</p>
<p>The advantages of using Dependency Injection pattern and Inversion of Control are the following:</p>
<ul>
<li>Reduces class coupling </li><li>Increases code reusing </li><li>Improves code maintainability </li><li>Improves application testing </li></ul>
<p>In this Hands-on Lab, I will be doing below high levele steps</p>
<ul>
<li>Integrate ASP.NET MVC 5 with Unity for Dependency Injection using NuGet Packages
</li><li>Use Dependency Injection inside an ASP.NET MVC Controller </li></ul>
<p>You can use the same strategy while implementing the depedency injection on MVC View and MVC Action Filters level as well.</p>
<p>&nbsp;</p>
<h1><span>Building the Sample</span></h1>
<p><em>Tools requirement</em></p>
<ul>
<li><em>Visual Studio 2015</em> </li><li><em>MVC5</em> </li></ul>
<p><span style="font-size:20px; font-weight:bold">Description</span></p>
<h3><em>&nbsp;Step1:&nbsp;</em></h3>
<p>Open Visual Studio and create the MVC 5 web application</p>
<h3>Step2: Install Unity Container.</h3>
<p><span>Now install Unity.Mvc5 Container using NuGet Package Manager Console tool as shown below:</span></p>
<p><span><img id="186308" src="description/Nuget install.jpg" alt="" width="660" height="299"><br>
</span></p>
<p><span>You can also do online search for Unity.Mvc5 Container by navigating to Tools=&gt;Extension and Update..=&gt;Online options in Visual Studio 2015 and install it.</span></p>
<p><span><span>When it will be installed successfully, you will be find the following some references add to your project and a UnityConfig.cs class file at project level, as shown below:</span></span></p>
<p><span><span><img id="186310" src="description/References.jpg" alt="" width="270" height="294"><br>
</span></span></p>
<h3 class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">using <a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.Mvc.aspx"  title="Auto generated link to System.Web.Mvc">System.Web.Mvc</a>;
using Unity;
using Unity.Mvc5;

namespace MVCUnityIOCDemo
{
    public static class UnityConfig
    {
        public static void RegisterComponents()
        {
            var container = new UnityContainer();

            // register all your components with the container here
            // it is NOT necessary to register your controllers

            // e.g. container.RegisterType&lt;ITestService, TestService&gt;();

           

            DependencyResolver.SetResolver(new UnityDependencyResolver(container));
        }
    }
}</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.Mvc.aspx"  title="Auto generated link to System.Web.Mvc">System.Web.Mvc</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;Unity;&nbsp;
<span class="cs__keyword">using</span>&nbsp;Unity.Mvc5;&nbsp;
&nbsp;
<span class="cs__keyword">namespace</span>&nbsp;MVCUnityIOCDemo&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">class</span>&nbsp;UnityConfig&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">void</span>&nbsp;RegisterComponents()&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;container&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;UnityContainer();&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;register&nbsp;all&nbsp;your&nbsp;components&nbsp;with&nbsp;the&nbsp;container&nbsp;here</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;it&nbsp;is&nbsp;NOT&nbsp;necessary&nbsp;to&nbsp;register&nbsp;your&nbsp;controllers</span>&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;e.g.&nbsp;container.RegisterType&lt;ITestService,&nbsp;TestService&gt;();</span>&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependencyResolver.SetResolver(<span class="cs__keyword">new</span>&nbsp;UnityDependencyResolver(container));&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
}</pre>
</div>
</div>
</h3>
<h3>&nbsp;Step3: Create Service layer, Domain Models and Interfaces and repositories</h3>
<p>Domain Model</p>
<p>&nbsp;</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">public class Product
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Category { get; set; }
        public decimal Price { get; set; }
    }</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">class</span>&nbsp;Product&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">int</span>&nbsp;Id&nbsp;{&nbsp;<span class="cs__keyword">get</span>;&nbsp;<span class="cs__keyword">set</span>;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">string</span>&nbsp;Name&nbsp;{&nbsp;<span class="cs__keyword">get</span>;&nbsp;<span class="cs__keyword">set</span>;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">string</span>&nbsp;Category&nbsp;{&nbsp;<span class="cs__keyword">get</span>;&nbsp;<span class="cs__keyword">set</span>;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">decimal</span>&nbsp;Price&nbsp;{&nbsp;<span class="cs__keyword">get</span>;&nbsp;<span class="cs__keyword">set</span>;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}</pre>
</div>
</div>
</div>
<div class="endscriptcode">&nbsp;</div>
<p>&nbsp;</p>
<p>Interfaces</p>
<p>&nbsp;</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">using MVCUnityIOCDemo.DomainModels;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Collections.Generic.aspx"  title="Auto generated link to System.Collections.Generic">System.Collections.Generic</a>;

namespace MVCUnityIOCDemo.Interfaces
{
    public interface IProductRepository
    {
        IEnumerable&lt;Product&gt; GetAll();

        Product Get(int id);

        Product Add(Product item);

        bool Update(Product item);

        bool Delete(int id);
    }
}</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">using</span>&nbsp;MVCUnityIOCDemo.DomainModels;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Collections.Generic.aspx"  title="Auto generated link to System.Collections.Generic">System.Collections.Generic</a>;&nbsp;
&nbsp;
<span class="cs__keyword">namespace</span>&nbsp;MVCUnityIOCDemo.Interfaces&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">interface</span>&nbsp;IProductRepository&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IEnumerable&lt;Product&gt;&nbsp;GetAll();&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Product&nbsp;Get(<span class="cs__keyword">int</span>&nbsp;id);&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Product&nbsp;Add(Product&nbsp;item);&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">bool</span>&nbsp;Update(Product&nbsp;item);&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">bool</span>&nbsp;Delete(<span class="cs__keyword">int</span>&nbsp;id);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
}</pre>
</div>
</div>
</div>
<div class="endscriptcode">&nbsp;</div>
<p>&nbsp;</p>
<p>Repository Service:</p>
<p>&nbsp;</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">using MVCUnityIOCDemo.DomainModels;
using MVCUnityIOCDemo.Interfaces;
using System;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Collections.Generic.aspx"  title="Auto generated link to System.Collections.Generic">System.Collections.Generic</a>;

namespace MVCUnityIOCDemo.Repository
{
    public class ProductRepository : IProductRepository
    {
        private List&lt;Product&gt; products = new List&lt;Product&gt;();
        private int _nextId = 1;

        public ProductRepository()
        {
            // Add products for the Demonstration
            Add(new Product { Name = &quot;TV&quot;, Category = &quot;Electronics&quot;, Price = 100 });
            Add(new Product { Name = &quot;Computer&quot;, Category = &quot;Electronics&quot;, Price = 1000 });
            Add(new Product { Name = &quot;Laptop&quot;, Category = &quot;Electronics&quot;, Price = 8000 });
            Add(new Product { Name = &quot;Google Pixel 2&quot;, Category = &quot;Phone&quot;, Price = 150 });
        }

        public IEnumerable&lt;Product&gt; GetAll()
        {
            // TO DO : Code to get the list of all the records in database
            return products;
        }

        public Product Get(int id)
        {
            // TO DO : Code to find a record in database
            return products.Find(p =&gt; p.Id == id);
        }

        public Product Add(Product item)
        {
            if (item == null)
            {
                throw new ArgumentNullException(&quot;item&quot;);
            }

            // TO DO : Code to save record into database
            item.Id = _nextId&#43;&#43;;
            products.Add(item);
            return item;
        }

        public bool Update(Product item)
        {
            if (item == null)
            {
                throw new ArgumentNullException(&quot;item&quot;);
            }

            // TO DO : Code to update record into database
            int index = products.FindIndex(p =&gt; p.Id == item.Id);
            if (index == -1)
            {
                return false;
            }
            products.RemoveAt(index);
            products.Add(item);
            return true;
        }

        public bool Delete(int id)
        {
            // TO DO : Code to remove the records from database
            products.RemoveAll(p =&gt; p.Id == id);
            return true;
        }
    }
}</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">using</span>&nbsp;MVCUnityIOCDemo.DomainModels;&nbsp;
<span class="cs__keyword">using</span>&nbsp;MVCUnityIOCDemo.Interfaces;&nbsp;
<span class="cs__keyword">using</span>&nbsp;System;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Collections.Generic.aspx"  title="Auto generated link to System.Collections.Generic">System.Collections.Generic</a>;&nbsp;
&nbsp;
<span class="cs__keyword">namespace</span>&nbsp;MVCUnityIOCDemo.Repository&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span><span class="cs__keyword">class</span>&nbsp;ProductRepository&nbsp;:&nbsp;IProductRepository&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">private</span>&nbsp;List&lt;Product&gt;&nbsp;products&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;List&lt;Product&gt;();&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">private</span><span class="cs__keyword">int</span>&nbsp;_nextId&nbsp;=&nbsp;<span class="cs__number">1</span>;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;ProductRepository()&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;Add&nbsp;products&nbsp;for&nbsp;the&nbsp;Demonstration</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(<span class="cs__keyword">new</span>&nbsp;Product&nbsp;{&nbsp;Name&nbsp;=&nbsp;<span class="cs__string">&quot;TV&quot;</span>,&nbsp;Category&nbsp;=&nbsp;<span class="cs__string">&quot;Electronics&quot;</span>,&nbsp;Price&nbsp;=&nbsp;<span class="cs__number">100</span>&nbsp;});&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(<span class="cs__keyword">new</span>&nbsp;Product&nbsp;{&nbsp;Name&nbsp;=&nbsp;<span class="cs__string">&quot;Computer&quot;</span>,&nbsp;Category&nbsp;=&nbsp;<span class="cs__string">&quot;Electronics&quot;</span>,&nbsp;Price&nbsp;=&nbsp;<span class="cs__number">1000</span>&nbsp;});&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(<span class="cs__keyword">new</span>&nbsp;Product&nbsp;{&nbsp;Name&nbsp;=&nbsp;<span class="cs__string">&quot;Laptop&quot;</span>,&nbsp;Category&nbsp;=&nbsp;<span class="cs__string">&quot;Electronics&quot;</span>,&nbsp;Price&nbsp;=&nbsp;<span class="cs__number">8000</span>&nbsp;});&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(<span class="cs__keyword">new</span>&nbsp;Product&nbsp;{&nbsp;Name&nbsp;=&nbsp;<span class="cs__string">&quot;Google&nbsp;Pixel&nbsp;2&quot;</span>,&nbsp;Category&nbsp;=&nbsp;<span class="cs__string">&quot;Phone&quot;</span>,&nbsp;Price&nbsp;=&nbsp;<span class="cs__number">150</span>&nbsp;});&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;IEnumerable&lt;Product&gt;&nbsp;GetAll()&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;TO&nbsp;DO&nbsp;:&nbsp;Code&nbsp;to&nbsp;get&nbsp;the&nbsp;list&nbsp;of&nbsp;all&nbsp;the&nbsp;records&nbsp;in&nbsp;database</span><span class="cs__keyword">return</span>&nbsp;products;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;Product&nbsp;Get(<span class="cs__keyword">int</span>&nbsp;id)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;TO&nbsp;DO&nbsp;:&nbsp;Code&nbsp;to&nbsp;find&nbsp;a&nbsp;record&nbsp;in&nbsp;database</span><span class="cs__keyword">return</span>&nbsp;products.Find(p&nbsp;=&gt;&nbsp;p.Id&nbsp;==&nbsp;id);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;Product&nbsp;Add(Product&nbsp;item)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">if</span>&nbsp;(item&nbsp;==&nbsp;<span class="cs__keyword">null</span>)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">throw</span><span class="cs__keyword">new</span>&nbsp;ArgumentNullException(<span class="cs__string">&quot;item&quot;</span>);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;TO&nbsp;DO&nbsp;:&nbsp;Code&nbsp;to&nbsp;save&nbsp;record&nbsp;into&nbsp;database</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item.Id&nbsp;=&nbsp;_nextId&#43;&#43;;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;products.Add(item);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;item;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span><span class="cs__keyword">bool</span>&nbsp;Update(Product&nbsp;item)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">if</span>&nbsp;(item&nbsp;==&nbsp;<span class="cs__keyword">null</span>)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">throw</span><span class="cs__keyword">new</span>&nbsp;ArgumentNullException(<span class="cs__string">&quot;item&quot;</span>);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;TO&nbsp;DO&nbsp;:&nbsp;Code&nbsp;to&nbsp;update&nbsp;record&nbsp;into&nbsp;database</span><span class="cs__keyword">int</span>&nbsp;index&nbsp;=&nbsp;products.FindIndex(p&nbsp;=&gt;&nbsp;p.Id&nbsp;==&nbsp;item.Id);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">if</span>&nbsp;(index&nbsp;==&nbsp;-<span class="cs__number">1</span>)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span><span class="cs__keyword">false</span>;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;products.RemoveAt(index);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;products.Add(item);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span><span class="cs__keyword">true</span>;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span><span class="cs__keyword">bool</span>&nbsp;Delete(<span class="cs__keyword">int</span>&nbsp;id)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;TO&nbsp;DO&nbsp;:&nbsp;Code&nbsp;to&nbsp;remove&nbsp;the&nbsp;records&nbsp;from&nbsp;database</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;products.RemoveAll(p&nbsp;=&gt;&nbsp;p.Id&nbsp;==&nbsp;id);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span><span class="cs__keyword">true</span>;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
}</pre>
</div>
</div>
</div>
<p>&nbsp;</p>
<h2>Step 4- Register the Dependency in UnityConfig.cs file</h2>
<h3>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">using MVCUnityIOCDemo.Interfaces;
using MVCUnityIOCDemo.Repository;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.Mvc.aspx"  title="Auto generated link to System.Web.Mvc">System.Web.Mvc</a>;
using Unity;
using Unity.Mvc5;

namespace MVCUnityIOCDemo
{
    public static class UnityConfig
    {
        public static void RegisterComponents()
        {
            var container = new UnityContainer();

            // register all your components with the container here
            // it is NOT necessary to register your controllers

            // e.g. container.RegisterType&lt;ITestService, TestService&gt;();

            container.RegisterType&lt;IProductRepository, ProductRepository&gt;();

            DependencyResolver.SetResolver(new UnityDependencyResolver(container));
        }
    }
}</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">using</span>&nbsp;MVCUnityIOCDemo.Interfaces;&nbsp;
<span class="cs__keyword">using</span>&nbsp;MVCUnityIOCDemo.Repository;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.Mvc.aspx"  title="Auto generated link to System.Web.Mvc">System.Web.Mvc</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;Unity;&nbsp;
<span class="cs__keyword">using</span>&nbsp;Unity.Mvc5;&nbsp;
&nbsp;
<span class="cs__keyword">namespace</span>&nbsp;MVCUnityIOCDemo&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">class</span>&nbsp;UnityConfig&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">void</span>&nbsp;RegisterComponents()&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;container&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;UnityContainer();&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;register&nbsp;all&nbsp;your&nbsp;components&nbsp;with&nbsp;the&nbsp;container&nbsp;here</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;it&nbsp;is&nbsp;NOT&nbsp;necessary&nbsp;to&nbsp;register&nbsp;your&nbsp;controllers</span>&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;e.g.&nbsp;container.RegisterType&lt;ITestService,&nbsp;TestService&gt;();</span>&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>container.RegisterType&lt;IProductRepository,&nbsp;ProductRepository&gt;();&nbsp;
</strong>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependencyResolver.SetResolver(<span class="cs__keyword">new</span>&nbsp;UnityDependencyResolver(container));&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
}</pre>
</div>
</div>
</div>
</h3>
<h3>&nbsp;Step5: Create Product Controller and View&nbsp;</h3>
<h3>&nbsp;Step6: Inject Service to Controller</h3>
<p><span>Now inject the dependency for the IProductRepository interface using the Product Controller's constructor as shown below</span></p>
<h3><span>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">using MVCUnityIOCDemo.DomainModels;
using MVCUnityIOCDemo.Interfaces;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.Mvc.aspx"  title="Auto generated link to System.Web.Mvc">System.Web.Mvc</a>;

namespace MVCUnityIOCDemo.Controllers
{
    public class ProductController : Controller
    {
        private readonly IProductRepository repository;

        //inject dependency
        public ProductController(IProductRepository repository)
        {
            this.repository = repository;
        }
}
}</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">using</span>&nbsp;MVCUnityIOCDemo.DomainModels;&nbsp;
<span class="cs__keyword">using</span>&nbsp;MVCUnityIOCDemo.Interfaces;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.Mvc.aspx"  title="Auto generated link to System.Web.Mvc">System.Web.Mvc</a>;&nbsp;
&nbsp;
<span class="cs__keyword">namespace</span>&nbsp;MVCUnityIOCDemo.Controllers&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span><span class="cs__keyword">class</span>&nbsp;ProductController&nbsp;:&nbsp;Controller&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">private</span><span class="cs__keyword">readonly</span>&nbsp;IProductRepository&nbsp;repository;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//inject&nbsp;dependency</span><span class="cs__keyword">public</span>&nbsp;ProductController(IProductRepository&nbsp;repository)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">this</span>.repository&nbsp;=&nbsp;repository;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
}&nbsp;
}</pre>
</div>
</div>
</div>
&nbsp;Step7:&nbsp;</span>Setup Dependency Injection with Unity in Global.asax.cs</h3>
<p><span><span>Now, setup the UnityConfig class with in the Application_Start method so that it can initialize all dependencies. This will be done by calling RegisterComponents() method of the UnityConfig&nbsp;class as shown below:</span></span></p>
<p><span><span></p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">using <a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.Mvc.aspx"  title="Auto generated link to System.Web.Mvc">System.Web.Mvc</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.Optimization.aspx"  title="Auto generated link to System.Web.Optimization">System.Web.Optimization</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.Routing.aspx"  title="Auto generated link to System.Web.Routing">System.Web.Routing</a>;

namespace MVCUnityIOCDemo
{
    public class MvcApplication : <a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.HttpApplication.aspx"  title="Auto generated link to System.Web.HttpApplication">System.Web.HttpApplication</a>
    {
        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();
            UnityConfig.RegisterComponents();
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
        }
    }
}</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.Mvc.aspx"  title="Auto generated link to System.Web.Mvc">System.Web.Mvc</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.Optimization.aspx"  title="Auto generated link to System.Web.Optimization">System.Web.Optimization</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://code.msdn.microsoft.com/Dependency-Injection-in-11d54863/https://msdn.microsoft.com/en-US/library/System.Web.Routing.aspx"  title="Auto generated link to System.Web.Routing">System.Web.Routing</a>;&nbsp;
&nbsp;
<span class="cs__keyword">namespace</span>&nbsp;MVCUnityIOCDemo&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">class</span>&nbsp;MvcApplication&nbsp;:&nbsp;System.Web.HttpApplication&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">protected</span>&nbsp;<span class="cs__keyword">void</span>&nbsp;Application_Start()&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AreaRegistration.RegisterAllAreas();&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size:medium"><strong>UnityConfig.RegisterComponents();</strong></span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RouteConfig.RegisterRoutes(RouteTable.Routes);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BundleConfig.RegisterBundles(BundleTable.Bundles);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
}</pre>
</div>
</div>
</div>
<div class="endscriptcode">&nbsp;Thats all. Run the application and see how the application works.&nbsp;</div>
<br>
</span></span>
<p></p>
<h1></h1>
<h1><span>Running the sample</span></h1>
<p><span><img id="186314" src="description/1.JPG" alt="" width="1198" height="461"></span></p>
<p>&nbsp;</p>
<p><span><img id="186315" src="description/2.JPG" alt="" width="683" height="461"><br>
</span></p>

</div>


    </div>
</body>
</html>
